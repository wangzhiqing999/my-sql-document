<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=GBK" />
  <title> 数据库会话的基本参数设置 SET  - 空/非空的默认值设定  </title>
  <link href="Common.css" rel="stylesheet" type="text/css" />
</head>

<body>


<h1> 数据库会话的基本参数设置 SET </h1>


<h2> 空/非空的默认值设定  </h2>



<table border="1" style="width:100%">

  <tr>
    <td> Oracle </td>
    <td>
<pre><code>


</code></pre>
    </td>
  </tr>





  <tr>
    <td> DB2 </td>
    <td>
<pre><code>


</code></pre>
    </td>
  </tr>





  <tr>
    <td> SQL Server </td>
    <td>
<pre><code>

SET ANSI_NULL_DFLT_OFF { ON | OFF }

SET ANSI_NULL_DFLT_ON {ON | OFF}

备注
仅当 CREATE TABLE 和 ALTER TABLE 语句中没有指定列的为空性，此设置才能影响新列的为空性。默认情况下，当 SET ANSI_NULL_DFLT_OFF 为 ON 时，如果没有显式指定列的为空性状态，则使用 ALTER TABLE 和 CREATE TABLE 语句创建的新列将为 NOT NULL。SET ANSI_NULL_DFLT_OFF 对使用显示 NULL 或 NOT NULL 创建的列无效。 
不能同时将 SET ANSI_NULL_DFLT_OFF 和 SET ANSI_NULL_DFLT_ON 设置为 ON。如果将一个选项设置为 ON，则将另一个选项设置为 OFF。因此，可以将 ANSI_NULL_DFLT_OFF 或 SET ANSI_NULL_DFLT_ON 设置为 ON，或者将二者都设置为 OFF。如果有一个选项为 ON，则该设置（SET ANSI_NULL_DFLT_OFF 或 SET ANSI_NULL_DFLT_ON）生效。如果将这两个选项都设置为 OFF，则 SQL Server 2005 将使用 sys.databases 目录视图中 is_ansi_null_default_on 列的值。 
为使 Transact-SQL 脚本在包含不同为空性设置的数据库中获得更可靠的操作，最好始终在 CREATE TABLE 和 ALTER TABLE 语句中指定 NULL 或 NOT NULL。
SET ANSI_NULL_DFLT_OFF 的设置是在执行或运行时设置的，而不是在分析时设置的。

1> SET ANSI_NULL_DFLT_OFF ON
2> GO
1> CREATE TABLE abcd (id INT);
2> GO
1> INSERT INTO abcd(id) VALUES(NULL);
2> GO
消息 515，级别 16，状态 2，服务器 HOME-BED592453C\SQLEXPRESS，第 1 行
不能将值 NULL 插入列 'id'，表 'test.dbo.abcd'；列不允许有空值。INSERT 失败。
语句已终止。
1> CREATE TABLE abcd2 (id INT NULL);
2> GO
1> INSERT INTO abcd2(id) VALUES(NULL);
2> GO
(1 行受影响)


1> DROP TABLE abcd;
2> DROP TABLE abcd2;
3> GO
1>
2> SET ANSI_NULL_DFLT_OFF OFF
3> SET ANSI_NULL_DFLT_ON ON
4> GO
1> CREATE TABLE abcd (id INT);
2> GO
1> INSERT INTO abcd(id) VALUES(NULL);
2> GO
(1 行受影响)
1> CREATE TABLE abcd2 (id INT NULL);
2> GO
1> INSERT INTO abcd2(id) VALUES(NULL);
2> GO
(1 行受影响)

</code></pre>
    </td>
  </tr>





  <tr>
    <td> MySQL</td>
    <td>
<pre><code>


</code></pre>
    </td>
  </tr>






  <tr>
    <td> SQLite </td>
    <td>
<pre><code>


</code></pre>
    </td>
  </tr>

</table>




</body>


</html>
